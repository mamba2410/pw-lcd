# pw-lcd

Emulate the Pokewalker LCD, based on the SSD1858 controller.
Can either display Pokewalker-encoded image as ASCII-output in the terminal,
or it can convert an 8-bit greyscale bitmap to Pokewalker format.

LCD is 96x64 pixels, terminal is 196x64 characters.

[Datasheet](https://cdn.datasheetspdf.com/pdf-down/S/S/D/SSD1854_ETC.pdf)

## Compilation

Compile with `make`.

```
$ make
```

## Usage

```
Usage: pw-lcd -i <input> [-o <output] [-v]\n\
    -i <input>  Input file.\n\
    -o <output> Output file\n\
    -v          View image\n\
    -w          Image width\n\
    -h          Image height\n\
```

Examples:

To display a pokewalker-encoded imageinside `test.bin` at default 96x64 pixels.
```
$ ./pw-lcd -i test.bin -v
```

To display a pokewalker-encoded imageinside `test.bin` at specified resolution 8x16 pixels.
```
$ ./pw-lcd -i test.bin -v -w 8 -h 16
```

To convert an 8-bit greyscale bitmap image in `myimage.bmp` to Pokewalker image in `myimage.bin`.
```
$ ./pw-lcd -i myimage.bmp -o myimage.bin
```

To do the above, but also view the output in the terminal at a certain resolution:
```
$ ./pw-lcd -i myimage.bmp -o myimage.bin -v -w <width> -h <height>
```

### Note when converting images

Make sure that the compression flag is `0` and the bit depth is `8`.
Otherwise, the program will produce inaccurate results or break.

It should work coming straight out of _GIMP_ with it set to greyscale and saved as a `.bmp` file.

Your image will be inverted on the actual Pokewalker screen (ie white in _GIMP_ corresponds to black on
the LCD).

Colour mapping:

- 192-255: white
- 128-191: light grey
- 64-127: dark grey
- 0-63: black



Expected output:
```
 0: ..................##++....##++..........................##++..........................##++++..........................++++##++....................##++..##++......................++++++++##++..
 1: ..................##++....##++..........................##++........................##++..........................##++....##++....................##########++............................##++..
 2: ..................++##..##++++..........................##++......................##++++..........................##++....##++....................++++++##++++....................##......##++..
 3: ......##++..........++##++++............##++............##++........######++......##########++......######++......++######++++........####++............##++......##########++....++######++++..
 4: ....##++##++..........++++..........######++............++++......##++++++##++....++++++++++++....##++++++##++......++++++++........##++##++............++++......##++++++++++......++++++++....
 5: ..##++....##++......................++++##++......................##++....##++....................##++....##++......................##++##++......................##++..........................
 6: ..##++....##++..........................##++......................++++....##++....................++++....##++....................##++..##++......................##++..........................
 7: ..oo......oo............................oo..............................oo............................oooo........................oo....oo........................oooooooo......................
 8: ..................##++++++##++........................##++++......................##++++++##++......................++++++##++....................................................++++++++++++..
 9: ..................##++....##++........................##++........................##++....##++............................##++......................####........................................
10: ..................##++....##++......................##++++........................##++....##++....................##......##++......................####++......................................
11: ....######++......++######++++....##########++......##++............######++......++######++++......######++......++######++..........................++++......................................
12: ..##++++++##++......++++++++......++++++++##++......++++..........##++++++##++......++++++++......##++++++##++......++++++..........####........................................................
13: ..##++....++++............................##++....................##++....##++....................##++....##++......................####++......................................................
14: ..##++..................................##++++....................##++....##++....................##++....##++........................++++......................................................
15: ..oooooooo..............................oo..........................oooooo..........................oooooooo......................................................oooooooooo....................
16: ....................##++++..............##..##..................................................................................................................................................
17: ....................##++................######..................................................................................................................................................
18: ..........##++....##++++............##############..............................................................................................................................................
19: ..........##++....##++..............##..++....####..............................................................................................................................................
20: ........##++++....++++..............##++++++++####..............................................................................................................................................
21: ........##++........................##..++....####..............................................................................................................................................
22: ......##++++........................##..++....####..............................................................................................................................................
23: ......oo............................oooooooooooooo..............................................................................................................................................
24: ................................................................................................................................................................................................
25: ................................................................................................................................................................................................
26: ................................................................................................................................................................................................
27: ................................................................................................................................................................................................
28: ................................................................................................................................................................................................
29: ................................................................................................................................................................................................
30: ................................................................................................................................................................................................
31: ................................................................................................................................................................................................
32: ................................................................................................................................................................................................
33: ................................................................................................................................................................................................
34: ................................................................................................................................................................................................
35: ................................................................................................................................................................................................
36: ................................................................................................................................................................................................
37: ................................................................................................................................................................................................
38: ................................................................................................................................................................................................
39: ................................................................................................................................................................................................
40: ................................................................................................................................................................................................
41: ................................................................................................................................................................................................
42: ................................................................................................................................................................................................
43: ................................................................................................................................................................................................
44: ................................................................................................................................................................................................
45: ................................................................................................................................................................................................
46: ................................................................................................................................................................................................
47: ................................................................................................................................................................................................
48: ................................................................................................................................................................................................
49: ................................................................................................................................................................................................
50: ................................................................................................................................................................................................
51: ................................................................................................................................................................................................
52: ................................................................................................................................................................................................
53: ................................................................................................................................................................................................
54: ................................................................................................................................................................................................
55: ................................................................................................................................................................................................
56: ................................................................................................................................................................................................
57: ................................................................................................................................................................................................
58: ................................................................................................................................................................................................
59: ................................................................................................................................................................................................
60: ................................................................................................................................................................................................
61: ................................................................................................................................................................................................
62: ................................................................................................................................................................................................
63: ................................................................................................................................................................................................
```
